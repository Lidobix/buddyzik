{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\33652\\\\Documents\\\\Projets persos\\\\buddyzik\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { lastValueFrom } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/services/auth.service\";\nimport * as i3 from \"src/services/buddy.service\";\nimport * as i4 from \"@angular/common/http\";\nimport * as i5 from \"src/services/server.service\";\nimport * as i6 from \"./header/header.component\";\nimport * as i7 from \"./nav/nav.component\";\nimport * as i8 from \"./footer/footer.component\";\nexport class AppComponent {\n  constructor(router, authService, buddyService, http, serverService) {\n    this.router = router;\n    this.authService = authService;\n    this.buddyService = buddyService;\n    this.http = http;\n    this.serverService = serverService;\n    this.title = 'buddyzik';\n    this.showNav = true;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      // console.log(\n      //   \"localStorage.getItem('token') : \",\n      //   localStorage.getItem('token')\n      // );\n      console.log(\"init de l'app\"); // if (localStorage.getItem('token') != null) {\n      //   this.showNav = true;\n      // } else {\n      //   this.showNav = false;\n      // }\n\n      _this.isLogged = yield lastValueFrom(_this.authService.getAuth()); // this.authService.getAuth().subscribe((value) => {\n      //   console.log(value);\n      // });\n      // return this.isLogged$;\n\n      console.log('this.isLogged :', _this.isLogged); // this.getAuth();\n      // alert('ouverture!');\n      // this.getAuth();\n    })();\n  }\n\n  getAuth() {\n    // console.log('presence token  = ', this.authService.isLogged);\n    console.log(this.authService.getAuth()); //   .subscribe((res: any) => (this.isLogged = res.check));\n    // console.log('', this.isLogged);\n    //   (authorization) => {\n    //   // console.log('type : ', typeof authorization);\n    //   // // console.log('type : ');\n    //   console.log('authorization cuicui : ', authorization);\n    //   return authorization;\n    //   // this.isLogged = authorization.isLogged;\n    //   // if (!authorization) {\n    //   //   console.log('pas de token valide');\n    //   //   // this.router.navigateByUrl('/login');\n    //   //   // ici.isLogged = false;\n    //   //   return false;\n    //   // } else {\n    //   //   console.log('token valide, on poursuit la nav');\n    //   //   return true;\n    //   //   // ici.isLogged = true;\n    //   //   // ici.router.navigateByUrl('/home');\n    //   // }\n    // }\n    // return true;\n    // const aa = checkConnection().then((value) => {\n    //   console.log(value);\n    // });\n    // console.log('this.isLogged : ', this.isLogged);\n    // // console.log('aa : ', aa);\n    // return this.isLogged;\n  }\n\n}\n\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.BuddyService), i0.ɵɵdirectiveInject(i4.HttpClient), i0.ɵɵdirectiveInject(i5.ServerService));\n};\n\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  decls: 4,\n  vars: 0,\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"app-header\")(1, \"app-nav\")(2, \"router-outlet\")(3, \"app-footer\");\n    }\n  },\n  directives: [i6.HeaderComponent, i7.NavComponent, i1.RouterOutlet, i8.FooterComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAuY29tcG9uZW50LnNjc3MifQ== */\"]\n});","map":{"version":3,"sources":["C:/Users/33652/Documents/Projets persos/buddyzik/src/app/app.component.ts"],"names":["lastValueFrom","i0","i1","i2","i3","i4","i5","i6","i7","i8","AppComponent","constructor","router","authService","buddyService","http","serverService","title","showNav","ngOnInit","console","log","isLogged","getAuth","ɵfac","AppComponent_Factory","t","ɵɵdirectiveInject","Router","AuthService","BuddyService","HttpClient","ServerService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","template","AppComponent_Template","rf","ctx","ɵɵelement","directives","HeaderComponent","NavComponent","RouterOutlet","FooterComponent","styles"],"mappings":"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","sourcesContent":["import { lastValueFrom } from 'rxjs';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/router\";\r\nimport * as i2 from \"src/services/auth.service\";\r\nimport * as i3 from \"src/services/buddy.service\";\r\nimport * as i4 from \"@angular/common/http\";\r\nimport * as i5 from \"src/services/server.service\";\r\nimport * as i6 from \"./header/header.component\";\r\nimport * as i7 from \"./nav/nav.component\";\r\nimport * as i8 from \"./footer/footer.component\";\r\nexport class AppComponent {\r\n    constructor(router, authService, buddyService, http, serverService) {\r\n        this.router = router;\r\n        this.authService = authService;\r\n        this.buddyService = buddyService;\r\n        this.http = http;\r\n        this.serverService = serverService;\r\n        this.title = 'buddyzik';\r\n        this.showNav = true;\r\n    }\r\n    async ngOnInit() {\r\n        // console.log(\r\n        //   \"localStorage.getItem('token') : \",\r\n        //   localStorage.getItem('token')\r\n        // );\r\n        console.log(\"init de l'app\");\r\n        // if (localStorage.getItem('token') != null) {\r\n        //   this.showNav = true;\r\n        // } else {\r\n        //   this.showNav = false;\r\n        // }\r\n        this.isLogged = await lastValueFrom(this.authService.getAuth());\r\n        // this.authService.getAuth().subscribe((value) => {\r\n        //   console.log(value);\r\n        // });\r\n        // return this.isLogged$;\r\n        console.log('this.isLogged :', this.isLogged);\r\n        // this.getAuth();\r\n        // alert('ouverture!');\r\n        // this.getAuth();\r\n    }\r\n    getAuth() {\r\n        // console.log('presence token  = ', this.authService.isLogged);\r\n        console.log(this.authService.getAuth());\r\n        //   .subscribe((res: any) => (this.isLogged = res.check));\r\n        // console.log('', this.isLogged);\r\n        //   (authorization) => {\r\n        //   // console.log('type : ', typeof authorization);\r\n        //   // // console.log('type : ');\r\n        //   console.log('authorization cuicui : ', authorization);\r\n        //   return authorization;\r\n        //   // this.isLogged = authorization.isLogged;\r\n        //   // if (!authorization) {\r\n        //   //   console.log('pas de token valide');\r\n        //   //   // this.router.navigateByUrl('/login');\r\n        //   //   // ici.isLogged = false;\r\n        //   //   return false;\r\n        //   // } else {\r\n        //   //   console.log('token valide, on poursuit la nav');\r\n        //   //   return true;\r\n        //   //   // ici.isLogged = true;\r\n        //   //   // ici.router.navigateByUrl('/home');\r\n        //   // }\r\n        // }\r\n        // return true;\r\n        // const aa = checkConnection().then((value) => {\r\n        //   console.log(value);\r\n        // });\r\n        // console.log('this.isLogged : ', this.isLogged);\r\n        // // console.log('aa : ', aa);\r\n        // return this.isLogged;\r\n    }\r\n}\r\nAppComponent.ɵfac = function AppComponent_Factory(t) { return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.BuddyService), i0.ɵɵdirectiveInject(i4.HttpClient), i0.ɵɵdirectiveInject(i5.ServerService)); };\r\nAppComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: AppComponent, selectors: [[\"app-root\"]], decls: 4, vars: 0, template: function AppComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelement(0, \"app-header\")(1, \"app-nav\")(2, \"router-outlet\")(3, \"app-footer\");\r\n    } }, directives: [i6.HeaderComponent, i7.NavComponent, i1.RouterOutlet, i8.FooterComponent], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAuY29tcG9uZW50LnNjc3MifQ== */\"] });\r\n"]},"metadata":{},"sourceType":"module"}